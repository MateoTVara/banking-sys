<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Configuración de Tipo de Cambio - Sistema Bancario</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  <link rel="stylesheet" href="{% static 'css/exchange_rate/setup.css' %}?v=1">
</head>
<body>
  <header class="setup-header">
    <h1>Sistema Bancario</h1>
    <a href="{% url 'logout' %}" class="logout-link">Cerrar Sesión</a>
  </header>

  <main>
    <section id="exchange-rate-setup-section">
      <div class="setup-card">
        <h2>Configuración Requerida</h2>
        <p class="warning-message">
          ⚠️ Para acceder al sistema, debe establecer el tipo de cambio para hoy: <strong>{{ today }}</strong>
        </p>
        
        {% if messages %}
          <div class="messages">
            {% for message in messages %}
              <div class="message {{ message.tags }}">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}

        <form method="post" class="exchange-rate-form">
          {% csrf_token %}
          
          <div class="form-group">
            <label for="rate">Tipo de Cambio (Soles por Dólar):</label>
            <input 
              type="number" 
              step="0.0001" 
              name="rate" 
              id="rate" 
              placeholder="Ej: 3.7500"
              {% if existing_rate %}value="{{ existing_rate.rate }}"{% endif %}
              required
              autofocus
            >
            <small>Ingrese el tipo de cambio del día (hasta 4 decimales)</small>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-primary">Guardar y Continuar</button>
          </div>
        </form>
      </div>
    </section>
  </main>
</body>
</html>
